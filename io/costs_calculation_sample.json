{
  "variables": [
    {
      "name": "length_m",
      "column_name": "ST_length(geography(ST_Transform(geom, 4326))) as length_m",
      "alias": "length_m",
      "mapping": "value"
    },
    {
      "name": "vitesse_voiture",
      "column_name": "nature",
      "alias": "nature",
      "mapping": {
        "Rond-point": 25,
        "Chemin": 10,
        "Sentier": -1,
        "Bretelle": 30,
        "Route à 1 chaussée": 70,
        "Route à 2 chaussées": 80,
        "Type autoroutier": 100,
        "Route empierrée": 20,
        "Escalier": -1,
        "Piste cyclable": -1,
        "Bac ou liaison maritime": -1
      }
    },
    {
      "name": "sens_direct",
      "column_name": "direction",
      "alias": "direction",
      "mapping": "value"
    },
    {
      "name": "sens_inverse",
      "column_name": "direction",
      "alias": "direction",
      "mapping": {
        "1": -1,
        "-1": 1,
        "0": 1
      }
    }
  ],
  "outputs": [
    {
      "name": "cost_m_car",
      "negative_flags": ["sens_direct"],
      "operations": [
        ["add", "length_m"]
      ]
    },
    {
      "name": "reverse_cost_m_car",
      "negative_flags": ["sens_inverse"],
      "operations": [
        ["add", "length_m"]
      ]
    },
    {
      "name": "cost_s_car",
      "negative_flags": ["sens_direct", "vitesse_voiture"],
      "operations": [
        ["add", "length_m"],
        ["divide", "vitesse_voiture"],
        ["multiply", 3.6]
      ]
    },
    {
      "name": "reverse_cost_s_car",
      "negative_flags": ["sens_inverse", "vitesse_voiture"],
      "operations": [
        ["add", "length_m"],
        ["divide", "vitesse_voiture"],
        ["multiply", 3.6]
      ]
    }
  ]

}
